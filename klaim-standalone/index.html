<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Klaim Promotion Builder</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/ai-chat.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <!-- Header Navigation -->
    <header class="header">
        <button class="btn-back">
            <i data-lucide="arrow-left"></i>
            Back to Dashboard
        </button>
        <div class="view-toggle">
            <button class="btn-view active" data-view="desktop">Desktop</button>
            <button class="btn-view" data-view="mobile">Mobile</button>
            <!-- AI ÌÖåÏä§Ìä∏ Î≤ÑÌäº (MVP) -->
            <button id="test-ai-btn" class="btn-test-ai" title="Gemini API Ïó∞Í≤∞ ÌÖåÏä§Ìä∏">
                ü§ñ AI Test
            </button>
        </div>
    </header>

    <div class="container">
        <!-- Left Settings Panel -->
        <aside class="settings-panel">
            <!-- General Section -->
            <section class="settings-section">
                <div class="section-header" data-toggle="general">
                    <h3>General</h3>
                    <i data-lucide="chevron-down"></i>
                </div>
                <div class="section-content" id="general-content">
                    <div class="form-group">
                        <label for="title">Title *</label>
                        <input type="text" id="title" placeholder="JasonCom">
                    </div>
                    <div class="form-group">
                        <label for="url">URL *</label>
                        <div class="url-input-wrapper">
                            <span class="url-prefix">https://briefly.klaim.me/</span>
                            <input type="text" id="url" placeholder="jason">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="description">Description</label>
                        <textarea id="description" rows="3" placeholder="Enter promotion description"></textarea>
                    </div>
                </div>
            </section>

            <!-- Pricing Section -->
            <section class="settings-section">
                <div class="section-header" data-toggle="pricing">
                    <h3>Pricing *</h3>
                    <i data-lucide="chevron-down"></i>
                </div>
                <div class="section-content" id="pricing-content">
                    <div id="pricing-list" class="pricing-list">
                        <!-- Pricing items will be added here dynamically -->
                    </div>
                    <button class="btn-add-pricing">
                        <i data-lucide="plus"></i>
                        Add Pricing
                    </button>
                </div>
            </section>

            <!-- Expiration Section -->
            <section class="settings-section">
                <div class="section-header" data-toggle="expiration">
                    <h3>Expiration</h3>
                    <i data-lucide="chevron-down"></i>
                </div>
                <div class="section-content" id="expiration-content">
                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="has-expiration">
                        <label for="has-expiration">Has expiration</label>
                    </div>
                    <div class="form-group" id="expiration-date-group" style="display: none;">
                        <label for="expiration-date">Expiration date/time</label>
                        <input type="datetime-local" id="expiration-date">
                    </div>
                </div>
            </section>

            <!-- Colors Section -->
            <section class="settings-section">
                <div class="section-header" data-toggle="colors">
                    <h3>Colors</h3>
                    <i data-lucide="chevron-down"></i>
                </div>
                <div class="section-content" id="colors-content">
                    <div class="form-group">
                        <label>Template</label>
                        <select id="color-template">
                            <option value="default">Default</option>
                            <option value="ocean">Ocean</option>
                            <option value="sunset">Sunset</option>
                            <option value="forest">Forest</option>
                            <option value="blackwhite">Black & White</option>
                            <option value="midnight">Midnight</option>
                            <option value="darkocean">Dark Ocean</option>
                        </select>
                    </div>
                    <div class="color-inputs">
                        <div class="form-group">
                            <label for="color-primary">Primary</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="color-primary" value="#4EA699">
                                <input type="text" id="color-primary-text" value="#4EA699">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="color-secondary">Secondary</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="color-secondary" value="#140D4F">
                                <input type="text" id="color-secondary-text" value="#140D4F">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="color-text">Text</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="color-text" value="#1F2937">
                                <input type="text" id="color-text-text" value="#1F2937">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="color-accent">Accent Text</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="color-accent" value="#FFFFFF">
                                <input type="text" id="color-accent-text" value="#FFFFFF">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="color-background">Background</label>
                            <div class="color-input-wrapper">
                                <input type="color" id="color-background" value="#FFFFFF">
                                <input type="text" id="color-background-text" value="#FFFFFF">
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Name this promotion Section -->
            <section class="settings-section">
                <div class="section-header" data-toggle="promotion-name">
                    <h3>Name this promotion</h3>
                    <i data-lucide="chevron-down"></i>
                </div>
                <div class="section-content" id="promotion-name-content">
                    <div class="form-group">
                        <input type="text" id="promotion-name" placeholder="Campaign from 1/4 to 1/21">
                    </div>
                </div>
            </section>

            <!-- Link Preview Section -->
            <section class="settings-section">
                <div class="section-header" data-toggle="link-preview">
                    <h3>Link Preview</h3>
                    <i data-lucide="chevron-down"></i>
                </div>
                <div class="section-content" id="link-preview-content">
                    <div class="form-group">
                        <label for="link-title">Title</label>
                        <input type="text" id="link-title" placeholder="Social share title">
                    </div>
                    <div class="form-group">
                        <label for="link-description">Description</label>
                        <textarea id="link-description" rows="2" placeholder="Social share description"></textarea>
                    </div>
                    <button class="btn-generate-preview">Generate preview image</button>
                </div>
            </section>
        </aside>

        <!-- Right Preview Panel -->
        <main class="preview-panel">
            <iframe id="preview-frame" src="preview.html"></iframe>
        </main>
    </div>

    <!-- Footer Actions -->
    <footer class="footer">
        <button class="btn-save">Save as Draft</button>
        <button class="btn-publish">Publish</button>
    </footer>

    <!-- Pricing Modal -->
    <div id="pricing-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Add Pricing</h2>
                <button class="modal-close">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="modal-units">Units</label>
                    <input type="number" id="modal-units" placeholder="10">
                </div>
                <div class="form-group">
                    <label for="modal-unit">Unit</label>
                    <input type="text" id="modal-unit" placeholder="credits">
                </div>
                <div class="form-group">
                    <label>Type</label>
                    <div class="toggle-group">
                        <button class="toggle-btn active" data-type="free">Free</button>
                        <button class="toggle-btn" data-type="paid">Paid</button>
                    </div>
                </div>
                <div class="form-group" id="price-group" style="display: none;">
                    <label for="modal-price">Price</label>
                    <div class="price-input-wrapper">
                        <span>$</span>
                        <input type="number" id="modal-price" placeholder="59.00" step="0.01">
                    </div>
                </div>
                <div class="form-group">
                    <label for="modal-name">Name</label>
                    <input type="text" id="modal-name" placeholder="Free">
                </div>
                <div class="form-group">
                    <label for="modal-description">Description</label>
                    <textarea id="modal-description" rows="2" placeholder="This is free item"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel">Cancel</button>
                <button class="btn-save-pricing">Save</button>
            </div>
        </div>
    </div>

    <!-- AI Ï±ÑÌåÖ UI -->
    <!-- AI ÌÜ†Í∏Ä Î≤ÑÌäº -->
    <button id="ai-chat-toggle" class="ai-chat-toggle">
        üí¨ AI Assistant
    </button>

    <!-- AI Ï±ÑÌåÖ Ìå®ÎÑê -->
    <div id="ai-chat-panel" class="ai-chat-panel hidden">
        <!-- Ï±ÑÌåÖ Ìó§Îçî -->
        <div class="ai-chat-header">
            <h3>ü§ñ AI Assistant</h3>
            <button id="ai-chat-close" class="ai-chat-close" title="Îã´Í∏∞">
                √ó
            </button>
        </div>

        <!-- Ï±ÑÌåÖ Î©îÏãúÏßÄ ÏòÅÏó≠ -->
        <div id="ai-chat-messages" class="ai-chat-messages">
            <!-- Î©îÏãúÏßÄÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
        </div>

        <!-- Ï±ÑÌåÖ ÏûÖÎ†• ÏòÅÏó≠ -->
        <div class="ai-chat-input">
            <!-- Îπ†Î•∏ Ïï°ÏÖò Î≤ÑÌäºÎì§ -->
            <div id="ai-quick-actions" class="ai-quick-actions">
                <button class="ai-quick-button" data-action="3Í∞ú Í∏∞Î≥∏ ÌîåÎûú ÎßåÎì§Ïñ¥Ï§ò">3Í∞ú Í∏∞Î≥∏ ÌîåÎûú</button>
                <button class="ai-quick-button" data-action="ÎØºÌä∏ÏÉâ ÌÖåÎßàÎ°ú Î∞îÍøîÏ§ò">ÎØºÌä∏ ÌÖåÎßà</button>
                <button class="ai-quick-button" data-action="Î™®Îì† Í∞ÄÍ≤©ÏùÑ 30% Ìï†Ïù∏Ìï¥Ï§ò">30% Ìï†Ïù∏</button>
            </div>

            <!-- ÏûÖÎ†• Ïª®ÌÖåÏù¥ÎÑà -->
            <div class="ai-input-container">
                <textarea 
                    id="ai-input-field" 
                    class="ai-input-field" 
                    placeholder="ÌîÑÎ°úÎ™®ÏÖò ÏÑ§Ï†ïÏùÑ ÏûêÏó∞Ïñ¥Î°ú ÎßêÏîÄÌï¥Ï£ºÏÑ∏Ïöî..."
                    rows="1"
                ></textarea>
                <button id="ai-send-button" class="ai-send-button" title="Ï†ÑÏÜ°">
                    ‚û§
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    
    <!-- AI Í∏∞Îä• (ES Î™®Îìà) -->
    <script type="module" src="js/ai-test.js"></script>
    <script type="module" src="js/ai-chat.js"></script>
</body>
</html>